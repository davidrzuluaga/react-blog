(window["webpackJsonpreact-blog"]=window["webpackJsonpreact-blog"]||[]).push([[0],{116:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),c=a(2),i=a(6),s=a(27),u=a(163),m=a(164),p=a(165),d=a(168),E=a(167),g=a(166),b=a(120),f=a(159),h=a(177),O=a(162),v=a(161),w=a(18),j=a.n(w),y=a(12),k=a.n(y);function P(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],o=a[1];function l(){o(!n)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{size:"small",color:"primary",onClick:l},"Delete"),n?r.a.createElement(h.a,{open:!0,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(v.a,{id:"alert-dialog-title"},"Delete the post ",e.element.title,"?"),r.a.createElement(O.a,null,r.a.createElement(f.a,{onClick:function(){return t=e.element._id,void j()({url:"".concat("https://node-blog-api-app.herokuapp.com","/api/blog/").concat(t),headers:{Authorization:"Token ".concat(k.a.load("session").token)},method:"DELETE"}).then(function(a){if(200===a.status){var n=e.blogEntries.filter(function(e){return e._id!==t});e.setBlogEntries(n),l()}},function(e){console.log(e)});var t},color:"primary",autoFocus:!0},"Yes"),r.a.createElement(f.a,{onClick:l,color:"primary"},"No"))):"")}var C=Object(u.a)({card:{margin:"10px 0"},media:{height:140}});function S(e){var t=C();return r.a.createElement(m.a,{className:t.card},r.a.createElement(p.a,null,r.a.createElement(g.a,{className:t.media,image:e.element.picture,title:"Contemplative Reptile"}),r.a.createElement(E.a,null,r.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.element.title),r.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},e.element.description))),r.a.createElement(d.a,null,"/userentries"===window.location.pathname?r.a.createElement(P,Object.assign({},e,{element:e.element})):""))}var N=function(e){return r.a.createElement("div",{className:"blogEntries"},e.blogEntries.map(function(t){return r.a.createElement(S,Object.assign({key:t._id},e,{element:t}))}),0===e.blogEntries.length?"It seems that is not entries here. Write one!":"")},D=a(169),T=function(){var e=Object(n.useState)(function(){j()({method:"GET",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/blogs")}).then(function(e){c(e.data.Blog)}).catch(function(e){console.log(e)})}),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)([])),o=Object(i.a)(a,2),l=o[0],c=o[1];return r.a.createElement(D.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(D.a,{item:!0,xs:5},r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Welcome to the blog"),r.a.createElement("p",null,"Here you can see all the entries!")),r.a.createElement(N,{blogEntries:l})))},B=function(){return r.a.createElement("div",{className:"notfound"},r.a.createElement("p",null,"Not Found"))},x=a(170),z=a(171),W=a(172),L=a(75),F=a.n(L),I=a(179),A=a(77);function G(){k.a.load("session")&&("/login"!==window.location.pathname&&"/signup"!==window.location.pathname||window.location.replace("/"))}var _=Object(u.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},icon:{color:"white"}}});function M(){var e=_(),t=r.a.useState(null),a=Object(i.a)(t,2),n=a[0],o=a[1],l=Boolean(n);return r.a.createElement("div",{className:e.root},r.a.createElement(x.a,{position:"static"},r.a.createElement(z.a,null,r.a.createElement(b.a,{variant:"h6",className:e.title},r.a.createElement("a",{href:"/",style:{color:"white"}},"Blog")),k.a.load("session")?r.a.createElement("div",null,r.a.createElement(f.a,{style:{color:"white"},onClick:function(){return window.location.replace("/userentries")}},"My entries"),r.a.createElement(W.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement(F.a,null)),r.a.createElement(A.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){o(null)}},r.a.createElement(I.a,{onClick:function(){return k.a.remove("session",{path:"/"}),void window.location.replace("/")}},"Logout"))):r.a.createElement(I.a,{onClick:function(){return window.location.replace("/login")}},"Login"))))}a(116);var R=a(10),J=a(175);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Y=function(){var e=r.a.useState({email:"",password:""}),t=Object(i.a)(e,2),a=t[0],o=t[1],l=r.a.useState(!1),c=Object(i.a)(l,2),s=c[0],u=c[1],p=Object(n.useState)(function(){return G()}),g=Object(i.a)(p,2),b=(g[0],g[1],function(e){return function(t){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(R.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,Object(R.a)({},e,t.target.value)))}});function h(e,t){e&&t?function(e,t){j()({method:"POST",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/users/login"),data:{user:{email:e,password:t}}}).then(function(e){k.a.save("session",e.data.user,{path:"/"}),window.location.replace("/")}).catch(function(e){alert("Wrong credentials, please check.")})}(e,t):u(!0)}return r.a.createElement("div",{className:"login"},r.a.createElement(m.a,null,r.a.createElement("p",null,"Login!"),r.a.createElement(E.a,{className:"content"},r.a.createElement(J.a,{id:"outlined-name",label:"Email",value:a.email,onChange:b("email"),variant:"outlined",margin:"normal"}),r.a.createElement(J.a,{id:"outlined-password-input",label:"Password",onChange:b("password"),type:"password",margin:"normal",variant:"outlined"}),s?r.a.createElement("p",null,"Please write a valid email and password."):"",r.a.createElement("p",null,r.a.createElement("a",{href:"/signup"},"Click here to create an account"))),r.a.createElement(d.a,null,r.a.createElement(f.a,{size:"small",onClick:function(){return h(a.email,a.password)},color:"primary"},"Enter!"))))},q=a(174),H=a(173);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function K(e){var t=r.a.useState({title:"",description:""}),a=Object(i.a)(t,2),n=a[0],o=a[1],l=r.a.useState(!1),c=Object(i.a)(l,2),s=c[0],u=c[1],m=r.a.useState(!1),p=Object(i.a)(m,2),d=p[0],E=p[1],g=function(e){return function(t){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach(function(t){Object(R.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,Object(R.a)({},e,t.target.value)))}};function b(){u(!s),o({title:"",description:""}),E(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{color:"inherit",onClick:b},r.a.createElement(H.a,null,r.a.createElement("i",{className:"material-icons"},"create")),"Create a post"),s?r.a.createElement(h.a,{open:!0,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(v.a,{id:"alert-dialog-title"},"New post"),r.a.createElement(q.a,null,r.a.createElement(J.a,{id:"outlined-name",label:"Title",value:n.title,onChange:g("title"),variant:"outlined",margin:"normal",fullWidth:!0}),r.a.createElement(J.a,{id:"outlined-dense-multiline",label:"Content",value:n.description,onChange:g("description"),variant:"outlined",margin:"normal",rowsMax:"10",multiline:!0,fullWidth:!0}),r.a.createElement(J.a,{id:"outlined-name",label:"Image Link",value:n.image,onChange:g("image"),variant:"outlined",margin:"normal",fullWidth:!0}),d?r.a.createElement("p",null,"Please write a valid title and post content."):""),r.a.createElement(O.a,null,r.a.createElement(f.a,{onClick:function(){return t=n.title,a=n.description,r=n.image,void(t&&a?j()({headers:{Authorization:"Token ".concat(k.a.load("session").token)},method:"POST",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/blog"),data:{title:t,description:a,picture:r,user:k.a.load("session")._id}}).then(function(t){var a=e.blogEntries.concat(t.data.Blog);e.setBlogEntries(a),b()}).catch(function(e){alert("Algo sali\xf3 mal.")}):E(!0));var t,a,r},color:"primary",autoFocus:!0},"Create"),r.a.createElement(f.a,{onClick:b,color:"primary"},"Close"))):"")}var Q=function(){var e=Object(n.useState)(function(){j()({headers:{Authorization:"Token ".concat(k.a.load("session").token)},method:"GET",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/blog/").concat(k.a.load("session")._id)}).then(function(e){c(e.data.Blog)}).catch(function(e){console.log(e)})}),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)([])),o=Object(i.a)(a,2),l=o[0],c=o[1];return r.a.createElement(D.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},console.log(l),r.a.createElement(D.a,{item:!0,xs:5},r.a.createElement("div",{className:"UserEntries"},r.a.createElement("h1",null,"Your Entries"),r.a.createElement(K,{blogEntries:l,setBlogEntries:c}),r.a.createElement(N,{blogEntries:l,setBlogEntries:c}))))},V=function(){return r.a.createElement("div",{className:"Loading"},r.a.createElement("p",null,"Loading"))};function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Z=function(){var e=r.a.useState({email:"",password:""}),t=Object(i.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(function(){return G()}),c=Object(i.a)(l,2),s=(c[0],c[1],r.a.useState(!1)),u=Object(i.a)(s,2),p=u[0],g=u[1],b=function(e){return function(t){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(R.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,Object(R.a)({},e,t.target.value)))}};function h(e,t){e&&t?function(e,t){j()({method:"POST",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/users/"),data:{user:{email:e,password:t}}}).then(function(e){k.a.save("session",e.data.user,{path:"/"}),window.location.replace("/")}).catch(function(e){402===e.request.status?alert("This email is already in use."):alert("Internal server error.")})}(e,t):g(!0)}return r.a.createElement("div",{className:"login"},r.a.createElement(m.a,null,r.a.createElement("p",null,"SignUp!"),r.a.createElement(E.a,{className:"content"},r.a.createElement(J.a,{id:"outlined-name",label:"Email",value:a.email,onChange:b("email"),variant:"outlined",margin:"normal"}),r.a.createElement(J.a,{id:"outlined-password-input",label:"Password",onChange:b("password"),type:"password",margin:"normal",variant:"outlined"}),p?r.a.createElement("p",null,"Please write a valid email and password."):"",r.a.createElement("p",null,r.a.createElement("a",{href:"/login"},"Click here to login"))),r.a.createElement(d.a,null,r.a.createElement(f.a,{size:"small",onClick:function(){return h(a.email,a.password)},color:"primary"},"Register!"))))};var ee=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:function(){return r.a.createElement(T,null)}}),r.a.createElement(s.b,{exact:!0,path:"/login",component:function(){return r.a.createElement(Y,null)}}),r.a.createElement(s.b,{exact:!0,path:"/signup",component:function(){return r.a.createElement(Z,null)}}),r.a.createElement(function(e){var t=e.component,n=Object(c.a)(e,["component"]);return k.a.load("session")?j()({headers:{Authorization:"Token ".concat(k.a.load("session").token)},method:"GET",url:"".concat("https://node-blog-api-app.herokuapp.com","/api/users/current")}).then(function(e){o(!0)}).catch(function(e){o(!1)}):o(!1),a?r.a.createElement(s.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):null===a?r.a.createElement(V,null):r.a.createElement(s.a,{to:"/login"})},{path:"/userentries",component:Q}),r.a.createElement(s.b,{path:"*",component:B})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(49);l.a.render(r.a.createElement(te.a,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(119)}},[[85,1,2]]]);
//# sourceMappingURL=main.bdf8db3f.chunk.js.map